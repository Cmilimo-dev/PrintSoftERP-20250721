<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Configuration Test</title>
</head>
<body>
    <h1>API Configuration Test</h1>
    <div id="output"></div>
    
    <script>
        // Simulate the API configuration logic
        const getApiBaseUrl = () => {
            // Get the current hostname
            const hostname = window.location.hostname;
            
            // If accessing from localhost (development on computer), use localhost
            if (hostname === 'localhost' || hostname === '127.0.0.1') {
                return 'http://localhost:3001';
            }
            
            // If accessing from network IP, use the same IP for API calls
            if (hostname.match(/^\d+\.\d+\.\d+\.\d+$/)) {
                return `http://${hostname}:3001`;
            }
            
            // Default fallback
            return 'http://localhost:3001';
        };

        const API_BASE_URL = getApiBaseUrl();
        
        document.getElementById('output').innerHTML = `
            <p><strong>Current hostname:</strong> ${window.location.hostname}</p>
            <p><strong>Current origin:</strong> ${window.location.origin}</p>
            <p><strong>API Base URL:</strong> ${API_BASE_URL}</p>
            <p><strong>Health check URL:</strong> ${API_BASE_URL}/health</p>
        `;
        
        // Test the API endpoint
        fetch(`${API_BASE_URL}/health`)
            .then(response => response.json())
            .then(data => {
                document.getElementById('output').innerHTML += `
                    <p><strong>Health check result:</strong> <span style="color: green">✓ Success</span></p>
                    <p><strong>Response:</strong> ${JSON.stringify(data)}</p>
                `;
            })
            .catch(error => {
                document.getElementById('output').innerHTML += `
                    <p><strong>Health check result:</strong> <span style="color: red">✗ Error: ${error.message}</span></p>
                `;
            });
    </script>
</body>
</html>
